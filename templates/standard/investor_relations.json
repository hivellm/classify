{
  "$schema": "https://hivellm.org/schemas/classify-template-v1.json",
  "version": "1.0",
  
  "metadata": {
    "name": "investor_relations",
    "display_name": "Investor Relations Documents",
    "description": "Classification template for investor relations documents including earnings reports, press releases, investor presentations, and SEC filings",
    "domains": ["investor_relations", "ir", "public_company", "disclosure"],
    "priority": 87,
    
    "indicators": [
      "earnings", "investor", "shareholder", "sec filing",
      "10-k", "10-q", "8-k", "press release", "quarterly",
      "revenue", "eps", "guidance", "analyst", "dividend",
      "stock", "market cap", "investor presentation"
    ],
    
    "document_types": [
      "earnings_release", "earnings_call_transcript", "investor_presentation",
      "sec_filing", "press_release", "annual_report", "proxy_statement",
      "dividend_announcement", "guidance_update"
    ],
    
    "example_titles": [
      "Q4 2024 Earnings Release",
      "Investor Presentation Q1 2025",
      "Form 10-K Annual Report",
      "Press Release - Acquisition Announcement",
      "Earnings Call Transcript Q3 2024",
      "Dividend Announcement"
    ],
    
    "use_cases": [
      "Earnings analysis and tracking",
      "SEC filing management",
      "Investor communication tracking",
      "Financial disclosure compliance",
      "Analyst relations management"
    ]
  },
  
  "llm_config": {
    "provider": "deepseek",
    "model": "deepseek-chat",
    "temperature": 0.1,
    "max_tokens": 2000,
    "system_prompt": "You are an expert investor relations analyst. Extract financial metrics (revenue, EPS, EBITDA), guidance, key performance indicators, forward-looking statements, and material events. Identify fiscal periods, comparisons, and analyst targets. Preserve exact financial figures and regulatory terminology.",
    "fallback_models": ["gpt-4o-mini", "claude-3-5-haiku-latest"]
  },
  
  "document_types": [
    {
      "type": "earnings_release",
      "display_name": "Earnings Release",
      "description": "Quarterly or annual earnings announcement",
      "indicators": ["earnings", "quarterly results", "revenue", "eps"],
      "required_entities": ["period", "revenue", "eps"],
      "optional_entities": ["guidance", "metrics", "comparison"],
      "priority": 100
    },
    {
      "type": "sec_filing",
      "display_name": "SEC Filing",
      "description": "SEC regulatory filing (10-K, 10-Q, 8-K, etc)",
      "indicators": ["sec", "10-k", "10-q", "8-k", "filing"],
      "required_entities": ["filing_type", "period", "company"],
      "optional_entities": ["cik", "accession_number"],
      "priority": 95
    },
    {
      "type": "investor_presentation",
      "display_name": "Investor Presentation",
      "description": "Investor or analyst presentation",
      "indicators": ["investor presentation", "analyst day", "roadshow"],
      "required_entities": ["date", "company"],
      "optional_entities": ["event", "audience"],
      "priority": 85
    }
  ],
  
  "entity_definitions": [
    {
      "type": "FinancialMetric",
      "description": "Financial performance metric",
      "properties": {
        "name": { "type": "string", "required": true },
        "value": { "type": "number", "required": true },
        "unit": { "type": "string", "required": false },
        "period": { "type": "string", "required": true },
        "comparison": { "type": "string", "required": false }
      },
      "extraction_methods": ["llm", "pattern"]
    },
    {
      "type": "Guidance",
      "description": "Forward-looking guidance",
      "properties": {
        "metric": { "type": "string", "required": true },
        "low_estimate": { "type": "number", "required": false },
        "high_estimate": { "type": "number", "required": false },
        "midpoint": { "type": "number", "required": false },
        "period": { "type": "string", "required": true }
      },
      "extraction_methods": ["llm"]
    },
    {
      "type": "Company",
      "description": "Company entity",
      "properties": {
        "name": { "type": "string", "required": true },
        "ticker": { "type": "string", "required": false },
        "cik": { "type": "string", "required": false },
        "exchange": { "type": "string", "required": false }
      },
      "extraction_methods": ["ner", "pattern"]
    },
    {
      "type": "Period",
      "description": "Reporting period",
      "properties": {
        "period_type": {
          "type": "enum",
          "values": ["Q1", "Q2", "Q3", "Q4", "FY", "H1", "H2"],
          "required": true
        },
        "year": { "type": "number", "required": true }
      },
      "extraction_methods": ["pattern"]
    }
  ],
  
  "relationship_definitions": [
    {
      "type": "REPORTS",
      "description": "Document reports metric",
      "source": "Document",
      "target": ["FinancialMetric"],
      "properties": {
        "period": { "type": "string", "required": true }
      },
      "extraction_methods": ["llm"]
    },
    {
      "type": "PROVIDES_GUIDANCE",
      "description": "Document provides guidance",
      "source": "Document",
      "target": ["Guidance"],
      "properties": {
        "confidence": { "type": "string", "required": false }
      },
      "extraction_methods": ["llm"]
    },
    {
      "type": "FILED_BY",
      "description": "Filing submitted by company",
      "source": "Document",
      "target": ["Company"],
      "properties": {
        "filing_date": { "type": "date", "required": false }
      },
      "extraction_methods": ["llm"]
    }
  ],
  
  "graph_schema": {
    "nodes": [
      {
        "type": "IRDocument",
        "labels": ["Document", "IRDocument"],
        "required_properties": ["id", "title", "doc_type", "period"],
        "optional_properties": ["company", "filing_type", "filing_date"],
        "indexes": [
          { "property": "id", "type": "unique" },
          { "property": "period", "type": "index" },
          { "property": "company", "type": "index" }
        ]
      },
      {
        "type": "FinancialMetric",
        "labels": ["Metric"],
        "required_properties": ["name", "value", "period"],
        "optional_properties": ["unit", "comparison"],
        "indexes": [{ "property": "name", "type": "index" }]
      },
      {
        "type": "Company",
        "labels": ["Entity", "Company"],
        "required_properties": ["name"],
        "optional_properties": ["ticker", "cik"],
        "indexes": [
          { "property": "name", "type": "fulltext" },
          { "property": "ticker", "type": "unique" }
        ]
      }
    ],
    
    "relationships": [
      {
        "type": "REPORTS",
        "source": "IRDocument",
        "target": "FinancialMetric",
        "properties": ["period"],
        "required": ["period"]
      },
      {
        "type": "FILED_BY",
        "source": "IRDocument",
        "target": "Company",
        "properties": ["filing_date"],
        "required": []
      }
    ]
  },
  
  "fulltext_schema": {
    "required_fields": ["title", "domain", "doc_type", "period", "company"],
    
    "extracted_fields": [
      {
        "name": "company",
        "type": "string",
        "description": "Company name",
        "extraction_method": "ner",
        "index": true
      },
      {
        "name": "ticker",
        "type": "string",
        "description": "Stock ticker symbol",
        "extraction_method": "pattern",
        "patterns": ["\\([A-Z]{1,5}\\)", "[A-Z]{1,5}:"],
        "index": true
      },
      {
        "name": "period",
        "type": "string",
        "description": "Reporting period",
        "extraction_method": "pattern",
        "patterns": ["Q[1-4]\\s*\\d{4}", "FY\\s*\\d{4}", "H[1-2]\\s*\\d{4}"],
        "index": true
      },
      {
        "name": "revenue",
        "type": "number",
        "description": "Revenue amount",
        "extraction_method": "llm",
        "index": true
      },
      {
        "name": "eps",
        "type": "number",
        "description": "Earnings per share",
        "extraction_method": "llm",
        "index": true
      },
      {
        "name": "guidance_provided",
        "type": "boolean",
        "description": "Whether guidance was provided",
        "extraction_method": "llm",
        "index": true
      }
    ],
    
    "keyword_extraction": {
      "enabled": true,
      "method": "tfidf",
      "min_frequency": 2,
      "max_keywords": 20,
      "exclude_stopwords": true,
      "preserve_entities": true
    },
    
    "categories": ["investor_relations", "earnings", "sec", "disclosure"],
    
    "summary": {
      "enabled": true,
      "method": "llm",
      "max_length": 400
    }
  },
  
  "extraction_rules": [
    {
      "name": "extract_financial_metrics",
      "description": "Extract key financial metrics",
      "method": "llm",
      "prompt": "Extract all financial metrics including revenue, EPS, EBITDA, operating income, net income, and margins with their values and comparisons to prior periods."
    },
    {
      "name": "extract_guidance",
      "description": "Extract forward guidance",
      "method": "llm",
      "prompt": "Extract all forward-looking guidance including ranges, midpoints, and timeframes."
    },
    {
      "name": "extract_period",
      "description": "Extract reporting period",
      "method": "pattern",
      "patterns": ["Q[1-4]\\s*\\d{4}", "FY\\s*\\d{4}", "H[1-2]\\s*\\d{4}"],
      "flags": "i"
    },
    {
      "name": "extract_ticker",
      "description": "Extract stock ticker",
      "method": "pattern",
      "patterns": ["\\(([A-Z]{1,5})\\)", "([A-Z]{1,5}):"],
      "post_processing": ["deduplicate"]
    }
  ],
  
  "validation_rules": [
    {
      "field": "company",
      "rules": [
        { "type": "required", "message": "Company name is required" }
      ]
    },
    {
      "field": "period",
      "rules": [
        { "type": "required", "message": "Reporting period is required" }
      ]
    },
    {
      "field": "revenue",
      "rules": [
        { "type": "min_value", "value": 0, "message": "Revenue must be non-negative" }
      ]
    }
  ]
}

