{
  "$schema": "https://hivellm.org/schemas/classify-template-v1.json",
  "version": "1.0",
  
  "metadata": {
    "name": "compliance",
    "display_name": "Compliance Documents",
    "description": "Classification template for compliance, audit, and regulatory documents",
    "domains": ["compliance", "audit", "regulatory", "risk"],
    "priority": 86,
    
    "indicators": [
      "compliance", "audit", "regulatory", "policy", "risk",
      "control", "requirement", "regulation", "standard",
      "certification", "sox", "gdpr", "iso", "assessment"
    ],
    
    "document_types": [
      "compliance_report", "audit_report", "policy_document",
      "risk_assessment", "control_matrix", "certification", "regulatory_filing"
    ],
    
    "example_titles": [
      "SOX Compliance Report Q4",
      "GDPR Compliance Assessment",
      "Internal Audit Report 2024",
      "Risk Assessment Matrix",
      "ISO 27001 Certification",
      "Compliance Policy Update"
    ],
    
    "use_cases": [
      "Compliance tracking and reporting",
      "Audit management",
      "Risk assessment and mitigation",
      "Regulatory compliance",
      "Policy management"
    ]
  },
  
  "llm_config": {
    "provider": "deepseek",
    "model": "deepseek-chat",
    "temperature": 0.05,
    "max_tokens": 2000,
    "system_prompt": "You are an expert compliance analyst. Extract compliance requirements, audit findings, risks, controls, regulations, and remediation actions. Identify compliance status, gaps, and deadlines. Preserve exact regulatory references and requirement numbers.",
    "fallback_models": ["gpt-4o-mini", "claude-3-5-haiku-latest"]
  },
  
  "document_types": [
    {
      "type": "compliance_report",
      "display_name": "Compliance Report",
      "description": "Compliance status or assessment report",
      "indicators": ["compliance", "assessment", "status", "requirements"],
      "required_entities": ["period", "requirements", "status"],
      "optional_entities": ["findings", "gaps"],
      "priority": 100
    }
  ],
  
  "entity_definitions": [
    {
      "type": "Requirement",
      "description": "Compliance requirement",
      "properties": {
        "requirement_id": { "type": "string", "required": true },
        "description": { "type": "string", "required": true },
        "status": { "type": "enum", "values": ["compliant", "non_compliant", "partial", "not_applicable"], "required": false },
        "regulation": { "type": "string", "required": false }
      },
      "extraction_methods": ["llm"]
    },
    {
      "type": "Finding",
      "description": "Audit or compliance finding",
      "properties": {
        "severity": { "type": "enum", "values": ["critical", "high", "medium", "low"], "required": true },
        "description": { "type": "string", "required": true },
        "remediation": { "type": "string", "required": false },
        "due_date": { "type": "date", "required": false }
      },
      "extraction_methods": ["llm"]
    },
    {
      "type": "Risk",
      "description": "Identified risk",
      "properties": {
        "name": { "type": "string", "required": true },
        "impact": { "type": "enum", "values": ["critical", "high", "medium", "low"] },
        "likelihood": { "type": "enum", "values": ["very_likely", "likely", "possible", "unlikely"] },
        "mitigation": { "type": "string", "required": false }
      },
      "extraction_methods": ["llm"]
    }
  ],
  
  "relationship_definitions": [
    {
      "type": "HAS_FINDING",
      "description": "Document has finding",
      "source": "Document",
      "target": ["Finding"],
      "properties": {
        "severity": { "type": "string", "required": true }
      },
      "extraction_methods": ["llm"]
    },
    {
      "type": "MITIGATES",
      "description": "Control mitigates risk",
      "source": "Control",
      "target": ["Risk"],
      "properties": {},
      "extraction_methods": ["llm"]
    }
  ],
  
  "graph_schema": {
    "nodes": [
      {
        "type": "ComplianceDocument",
        "labels": ["Document", "ComplianceDocument"],
        "required_properties": ["id", "title", "doc_type"],
        "optional_properties": ["period", "regulation", "status"],
        "indexes": [
          { "property": "id", "type": "unique" },
          { "property": "regulation", "type": "index" }
        ]
      }
    ],
    
    "relationships": [
      {
        "type": "HAS_FINDING",
        "source": "ComplianceDocument",
        "target": "Finding",
        "properties": ["severity"],
        "required": ["severity"]
      }
    ]
  },
  
  "fulltext_schema": {
    "required_fields": ["title", "domain", "doc_type"],
    
    "extracted_fields": [
      {
        "name": "regulation",
        "type": "string",
        "description": "Applicable regulation",
        "extraction_method": "pattern",
        "patterns": ["SOX", "GDPR", "ISO\\s*\\d+", "HIPAA", "PCI-DSS"],
        "index": true
      },
      {
        "name": "compliance_status",
        "type": "string",
        "description": "Overall compliance status",
        "extraction_method": "llm",
        "index": true
      },
      {
        "name": "findings_count",
        "type": "number",
        "description": "Number of findings",
        "extraction_method": "llm",
        "index": true
      },
      {
        "name": "critical_findings",
        "type": "number",
        "description": "Number of critical findings",
        "extraction_method": "llm",
        "index": true
      }
    ],
    
    "keyword_extraction": {
      "enabled": true,
      "method": "tfidf",
      "min_frequency": 1,
      "max_keywords": 20,
      "exclude_stopwords": true,
      "preserve_entities": true
    },
    
    "categories": ["compliance", "audit", "regulatory", "risk"],
    
    "summary": {
      "enabled": true,
      "method": "llm",
      "max_length": 400
    }
  },
  
  "extraction_rules": [
    {
      "name": "extract_requirements",
      "description": "Extract compliance requirements",
      "method": "llm",
      "prompt": "Extract all compliance requirements with their IDs, descriptions, status, and related regulations."
    },
    {
      "name": "extract_findings",
      "description": "Extract audit findings",
      "method": "llm",
      "prompt": "Extract all findings with severity, description, and remediation actions."
    }
  ],
  
  "validation_rules": [
    {
      "field": "compliance_status",
      "rules": [
        { "type": "enum", "values": ["compliant", "non_compliant", "partial", "in_progress"] }
      ]
    }
  ]
}

