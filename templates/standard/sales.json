{
  "$schema": "https://hivellm.org/schemas/classify-template-v1.json",
  "version": "1.0",
  
  "metadata": {
    "name": "sales",
    "display_name": "Sales Documents",
    "description": "Classification template for sales documents including proposals, quotes, contracts, pipeline reports, and sales presentations",
    "domains": ["sales", "revenue", "business_development"],
    "priority": 83,
    
    "indicators": [
      "proposal", "quote", "sales", "deal", "opportunity",
      "pipeline", "forecast", "revenue", "commission",
      "prospect", "lead", "customer", "close date",
      "win rate", "quota", "territory"
    ],
    
    "document_types": [
      "sales_proposal", "quote", "sales_contract", "pipeline_report",
      "sales_forecast", "territory_plan", "account_plan", "sales_presentation"
    ],
    
    "example_titles": [
      "Sales Proposal - Enterprise Deal",
      "Q4 2024 Sales Forecast",
      "Quote #12345",
      "Pipeline Report December",
      "Account Plan - Key Customer",
      "Territory Plan 2025"
    ],
    
    "use_cases": [
      "Proposal and quote management",
      "Pipeline tracking and forecasting",
      "Deal analysis and win/loss tracking",
      "Territory and account planning",
      "Sales performance tracking"
    ]
  },
  
  "llm_config": {
    "provider": "deepseek",
    "model": "deepseek-chat",
    "temperature": 0.1,
    "max_tokens": 2000,
    "system_prompt": "You are an expert sales analyst. Extract deal details, opportunity information, pricing, terms, close dates, win probability, pipeline stages, and revenue forecasts. Identify customers, products, quantities, and sales representatives. Preserve exact pricing and dates.",
    "fallback_models": ["gpt-4o-mini", "gemini-2.0-flash"]
  },
  
  "document_types": [
    {
      "type": "sales_proposal",
      "display_name": "Sales Proposal",
      "description": "Sales proposal or bid",
      "indicators": ["proposal", "solution", "pricing", "terms"],
      "required_entities": ["customer", "products", "total_value"],
      "optional_entities": ["sales_rep", "close_date", "terms"],
      "priority": 100
    },
    {
      "type": "pipeline_report",
      "display_name": "Pipeline Report",
      "description": "Sales pipeline status report",
      "indicators": ["pipeline", "forecast", "opportunities", "stages"],
      "required_entities": ["period", "opportunities"],
      "optional_entities": ["forecast", "win_rate"],
      "priority": 90
    }
  ],
  
  "entity_definitions": [
    {
      "type": "Opportunity",
      "description": "Sales opportunity or deal",
      "properties": {
        "name": { "type": "string", "required": true },
        "customer": { "type": "string", "required": true },
        "value": { "type": "number", "required": true },
        "stage": { "type": "string", "required": false },
        "close_date": { "type": "date", "required": false },
        "probability": { "type": "number", "required": false }
      },
      "extraction_methods": ["llm"]
    },
    {
      "type": "Customer",
      "description": "Customer or prospect",
      "properties": {
        "name": { "type": "string", "required": true },
        "type": { "type": "enum", "values": ["prospect", "customer", "partner"] },
        "industry": { "type": "string", "required": false }
      },
      "extraction_methods": ["ner", "llm"]
    },
    {
      "type": "Product",
      "description": "Product or service being sold",
      "properties": {
        "name": { "type": "string", "required": true },
        "quantity": { "type": "number", "required": false },
        "unit_price": { "type": "number", "required": false },
        "total_price": { "type": "number", "required": false }
      },
      "extraction_methods": ["llm"]
    },
    {
      "type": "SalesRep",
      "description": "Sales representative",
      "properties": {
        "name": { "type": "string", "required": true },
        "territory": { "type": "string", "required": false },
        "quota": { "type": "number", "required": false }
      },
      "extraction_methods": ["ner", "llm"]
    }
  ],
  
  "relationship_definitions": [
    {
      "type": "SELLS_TO",
      "description": "Opportunity sells to customer",
      "source": "Opportunity",
      "target": ["Customer"],
      "properties": {
        "value": { "type": "number", "required": true }
      },
      "extraction_methods": ["llm"]
    },
    {
      "type": "INCLUDES_PRODUCT",
      "description": "Opportunity includes product",
      "source": "Opportunity",
      "target": ["Product"],
      "properties": {
        "quantity": { "type": "number", "required": false },
        "price": { "type": "number", "required": false }
      },
      "extraction_methods": ["llm"]
    },
    {
      "type": "OWNED_BY",
      "description": "Opportunity owned by sales rep",
      "source": "Opportunity",
      "target": ["SalesRep"],
      "properties": {},
      "extraction_methods": ["llm"]
    }
  ],
  
  "graph_schema": {
    "nodes": [
      {
        "type": "SalesDocument",
        "labels": ["Document", "SalesDocument"],
        "required_properties": ["id", "title", "doc_type"],
        "optional_properties": ["customer", "total_value", "close_date"],
        "indexes": [
          { "property": "id", "type": "unique" },
          { "property": "customer", "type": "index" }
        ]
      },
      {
        "type": "Opportunity",
        "labels": ["Opportunity"],
        "required_properties": ["name", "customer", "value"],
        "optional_properties": ["stage", "close_date", "probability"],
        "indexes": [{ "property": "name", "type": "index" }]
      },
      {
        "type": "Customer",
        "labels": ["Entity", "Customer"],
        "required_properties": ["name"],
        "optional_properties": ["type", "industry"],
        "indexes": [{ "property": "name", "type": "fulltext" }]
      }
    ],
    
    "relationships": [
      {
        "type": "SELLS_TO",
        "source": "Opportunity",
        "target": "Customer",
        "properties": ["value"],
        "required": ["value"]
      },
      {
        "type": "INCLUDES_PRODUCT",
        "source": "Opportunity",
        "target": "Product",
        "properties": ["quantity", "price"],
        "required": []
      }
    ]
  },
  
  "fulltext_schema": {
    "required_fields": ["title", "domain", "doc_type"],
    
    "extracted_fields": [
      {
        "name": "customer",
        "type": "string",
        "description": "Customer name",
        "extraction_method": "ner",
        "index": true
      },
      {
        "name": "total_value",
        "type": "number",
        "description": "Total deal value",
        "extraction_method": "llm",
        "index": true
      },
      {
        "name": "close_date",
        "type": "date",
        "description": "Expected close date",
        "extraction_method": "pattern",
        "index": true
      },
      {
        "name": "products",
        "type": "array",
        "description": "Products/services offered",
        "extraction_method": "llm",
        "index": true
      },
      {
        "name": "sales_rep",
        "type": "string",
        "description": "Sales representative",
        "extraction_method": "ner",
        "index": true
      }
    ],
    
    "keyword_extraction": {
      "enabled": true,
      "method": "tfidf",
      "min_frequency": 1,
      "max_keywords": 20,
      "exclude_stopwords": true,
      "preserve_entities": true
    },
    
    "categories": ["sales", "revenue", "pipeline", "deal"],
    
    "summary": {
      "enabled": true,
      "method": "llm",
      "max_length": 350
    }
  },
  
  "extraction_rules": [
    {
      "name": "extract_opportunities",
      "description": "Extract sales opportunities",
      "method": "llm",
      "prompt": "Extract all sales opportunities with customer names, deal values, products, close dates, and probability."
    },
    {
      "name": "extract_pricing",
      "description": "Extract pricing information",
      "method": "pattern",
      "patterns": [
        {
          "pattern": "(?:total|amount|price):?\\s*\\$?([0-9,]+(?:\\.[0-9]{2})?)",
          "type": "total",
          "flags": "i"
        }
      ]
    }
  ],
  
  "validation_rules": [
    {
      "field": "customer",
      "rules": [
        { "type": "min_length", "value": 2 }
      ]
    },
    {
      "field": "total_value",
      "rules": [
        { "type": "min_value", "value": 0 }
      ]
    }
  ]
}

